[gd_scene load_steps=9 format=3 uid="uid://dfcvnjy1khitp"]

[ext_resource type="Script" path="res://scripts/player/player.gd" id="1_oucsa"]
[ext_resource type="Script" path="res://systems/progressBar/control.gd" id="2_me5s2"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_1vfes"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_uusp1"]
albedo_color = Color(0.282353, 1, 1, 1)
metallic = 1.0

[sub_resource type="CapsuleMesh" id="CapsuleMesh_uhf2c"]
material = SubResource("StandardMaterial3D_uusp1")

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ik1aw"]
radius = 0.86841
height = 1.73682

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_olkg3"]
bg_color = Color(0.6, 0.6, 0.6, 0.247059)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_0syqp"]
bg_color = Color(1, 1, 1, 1)

[node name="player" type="CharacterBody3D" node_paths=PackedStringArray("camera", "shakeFixTimer", "progressBarControl", "stamminaTimer", "recoveryTimer") groups=["player"]]
script = ExtResource("1_oucsa")
camera = NodePath("head/vertical/Camera3D")
shakeFixTimer = NodePath("Timer")
progressBarControl = NodePath("Control")
stamminaTimer = NodePath("Control/stamminaTimer")
recoveryTimer = NodePath("Control/recoveryTimer")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_1vfes")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
mesh = SubResource("CapsuleMesh_uhf2c")

[node name="head" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.876241, 0)

[node name="vertical" type="Node3D" parent="head"]

[node name="Camera3D" type="Camera3D" parent="head/vertical"]

[node name="Area3D" type="Area3D" parent="." groups=["player"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.19606, 0)
visible = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
shape = SubResource("CapsuleShape3D_ik1aw")

[node name="Timer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="RayCast3D" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Control" type="ProgressBar" parent="."]
visible = false
z_index = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 27.0
offset_top = 19.0
offset_right = -925.0
offset_bottom = -619.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/background = SubResource("StyleBoxFlat_olkg3")
theme_override_styles/fill = SubResource("StyleBoxFlat_0syqp")
show_percentage = false
script = ExtResource("2_me5s2")

[node name="ProgressBar" type="ProgressBar" parent="Control"]
visible = false
layout_mode = 0
offset_right = 4.0
offset_bottom = 27.0

[node name="stamminaTimer" type="Timer" parent="Control"]
wait_time = 0.1

[node name="recoveryTimer" type="Timer" parent="Control"]
wait_time = 0.1

[connection signal="area_entered" from="Area3D" to="." method="_on_area_3d_area_entered"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="timeout" from="Control/stamminaTimer" to="Control" method="_on_stammina_timer_timeout"]
[connection signal="timeout" from="Control/recoveryTimer" to="Control" method="_on_recovery_timer_timeout"]
